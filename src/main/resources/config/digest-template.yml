spring:
  config:
    activate:
      on-profile: dev,prod

# 다이제스트 템플릿 설정
digest:
  templates:
    # 기본 다이제스트 템플릿
    default:
      title: "📈 오늘의 경제뉴스 다이제스트"
      subtitle: "AI가 엄선한 주요 경제 뉴스를 한눈에"
      
      # 헤더 템플릿
      header: |
        🌅 **{{date}}** 경제뉴스 다이제스트
        
        안녕하세요! 오늘 하루 중요한 경제 뉴스들을 AI가 분석하여 전해드립니다.
        총 **{{totalArticles}}개**의 뉴스 중 **중요도 {{minImportance}}점 이상**인 뉴스만을 엄선했습니다.
        
        ---
        
      # 섹션 헤더 템플릿
      sectionHeaders:
        topNews: "🔥 **오늘의 핵심 뉴스**"
        marketNews: "📊 **시장/증권 동향**"
        policyNews: "🏛️ **정책/금융 뉴스**"
        realEstateNews: "🏠 **부동산 동향**"
        globalNews: "🌍 **국제 경제 뉴스**"
        corporateNews: "🏢 **기업 뉴스**"
        techNews: "💻 **IT/테크 뉴스**"
        otherNews: "📰 **기타 경제 뉴스**"
      
      # 기사 항목 템플릿
      articleItem: |
        ### {{importance}}🌟 **{{title}}**
        
        📍 **출처**: {{source}} | ⏰ **시간**: {{publishedTime}}
        
        ### 📝 **핵심 요약**
        {{#aiSummaryFormatted}}
        • {{this}}
        {{/aiSummaryFormatted}}
        
        ### 🔍 **AI 분석**
        {{#aiAnalysisFormatted}}
        ➤ {{this}}
        {{/aiAnalysisFormatted}}
        
        ### 📊 **영향도 평가**
        • **시장 영향**: {{marketImpact}}
        • **투자자 관심도**: {{investorInterest}}
        • **관련 섹터**: {{economicSectors}}
        
        ### 🏷️ **핵심 키워드**
        `{{keywords}}`
        
        {{#if glossary}}
        ### 📚 **경제 용어 해설**
        {{#glossary}}
        • **{{term}}**: {{definition}}
        {{/glossary}}
        {{/if}}
        
        📖 [**원문 보기**]({{url}}) | 🎯 **중요도**: {{importanceScore}}/10
        
        ---
        
      # 푸터 템플릿  
      footer: |
        
        ---
        
        📊 **오늘의 통계**
        - 📰 수집된 뉴스: {{totalCollected}}개
        - ✅ 분석 완료: {{totalAnalyzed}}개  
        - ⭐ 평균 중요도: {{avgImportance}}/10
        - 📈 긍정적 영향: {{positiveNews}}개
        - 📉 부정적 영향: {{negativeNews}}개
        
        🤖 **AI 분석 신뢰도**: {{avgConfidence}}/10
        
        💡 **투자 참고사항**: 이 다이제스트는 정보 제공 목적이며, 투자 결정은 개인의 판단에 따라 주시기 바랍니다.
        
        ---
        
        📅 다음 다이제스트는 **{{nextDigestTime}}**에 발송 예정입니다.
        
        🔗 더 많은 경제 뉴스: [경제뉴스 다이제스트 홈](https://github.com/yourco/econdigest)
        
        🤖 Made with ❤️ by EconDigest AI
        
    # 친근한 설명형 다이제스트 템플릿
    friendly:
      title: "💡 쉽게 읽는 경제뉴스"
      subtitle: "복잡한 경제 이슈도 쉽게!"
      
      # 친근한 헤더 템플릿
      header: |
        # 👋 안녕하세요! **{{date}}** 경제뉴스를 쉽게 정리해드려요
        
        🤔 **"경제뉴스가 어려워서 읽기 힘들다고요?"** 
        걱정마세요! AI가 오늘의 주요 경제 소식 **{{totalArticles}}개**를 쏙쏙 골라서, 누구나 이해할 수 있게 정리해드렸어요.
        
        🎯 **이렇게 선별했어요**: 중요도 {{minImportance}}점 이상인 뉴스만 엄선!
        📊 **읽는 시간**: 약 3-5분이면 오늘의 경제 흐름을 다 파악할 수 있어요!
        
        ---
        
      # 친근한 섹션 헤더
      sectionHeaders:
        topNews: "🚨 **꼭 알아야 할 핵심 소식** - 오늘의 가장 중요한 이야기들이에요!"
        marketNews: "📈 **주식시장 & 투자 이야기** - 돈의 흐름을 알아보세요"
        policyNews: "🏛️ **정부 정책 소식** - 우리 생활에 어떤 영향을 줄까요?"
        realEstateNews: "🏠 **부동산 소식** - 집값과 관련된 최신 동향이에요"
        globalNews: "🌏 **세계 경제 동향** - 해외에서 일어나는 중요한 일들"
        corporateNews: "🏢 **기업 소식** - 대기업들의 최신 동향"
        techNews: "💻 **IT & 기술 소식** - 미래를 바꿀 기술 이야기"
        otherNews: "📰 **기타 경제 소식** - 놓치면 아쉬운 다양한 이야기들"
      
      # 친근한 기사 항목 템플릿
      articleItem: |
        ## {{importance}}번째 🌟 **{{title}}**
        
        > 💭 **한 줄 요약**: {{#aiSummaryFormatted}}{{this}}{{/aiSummaryFormatted}}
        
        📰 **어디서 나온 소식?** {{source}} | 🕐 **언제?** {{publishedTime}}
        
        ### 🔍 **무슨 일인가요?**
        {{#aiSummaryFormatted}}
        💡 {{this}}
        {{/aiSummaryFormatted}}
        
        ### 🤷‍♀️ **왜 중요한가요?**
        {{#aiAnalysisFormatted}}
        🎯 {{this}}
        {{/aiAnalysisFormatted}}
        
        ### 📊 **나에게 어떤 영향이 있을까요?**
        {{#if marketImpact}}
        📈 **투자에 미치는 영향**: {{marketImpact}} 
        {{#if marketImpact_high}}
        💰 투자하시는 분들은 특히 주목해보세요!
        {{/if}}
        {{#if marketImpact_medium}}  
        📊 투자 포트폴리오를 점검해보는 것도 좋겠어요.
        {{/if}}
        {{#if marketImpact_low}}
        😌 당장 크게 걱정하실 필요는 없어 보여요.
        {{/if}}
        {{/if}}
        
        🎯 **관심도**: {{investorInterest}}
        🏭 **관련 분야**: {{economicSectors}}
        
        ### 🏷️ **핵심 키워드** 
        `{{keywords}}` 
        *→ 이 키워드들로 추가 정보를 찾아보세요!*
        
        {{#if glossary}}
        ### 🤓 **어려운 용어 쉽게 설명**
        {{#glossary}}
        **Q. {{term}}이 뭔가요?**  
        A. {{definition}} 
        
        {{/glossary}}
        {{/if}}
        
        🔗 [**전체 기사 읽어보기**]({{url}}) | 🎯 **중요도**: {{importanceScore}}/10
        
        ---
        
      # 친근한 푸터 템플릿  
      footer: |
        
        ---
        
        # 🎉 오늘의 경제뉴스 정리 끝!
        
        ## 📊 **오늘은 이런 뉴스들이 있었어요**
        📰 **총 수집된 뉴스**: {{totalCollected}}개
        ✨ **AI가 분석한 뉴스**: {{totalAnalyzed}}개  
        ⭐ **평균 중요도**: {{avgImportance}}/10점
        
        ## 📈 **오늘의 경제 분위기는?**
        😊 **좋은 소식**: {{positiveNews}}개 - 긍정적인 경제 신호들이에요!
        😟 **주의할 소식**: {{negativeNews}}개 - 조금 신경 써야 할 이슈들
        😐 **중립적 소식**: {{neutralNews}}개 - 그냥 알아두면 좋은 정보들
        
        🤖 **AI 분석 정확도**: {{avgConfidence}}/10 
        *→ AI가 이 정도로 확신한다는 뜻이에요!*
        
        ---
        
        ## 💬 **마지막으로 한 말씀**
        
        💡 **투자 TIP**: 이 다이제스트는 정보 전달이 목적이에요. 실제 투자할 때는 여러 정보를 꼼꼼히 비교해보시고, 필요하면 전문가와 상담해주세요!
        
        🕐 **다음 다이제스트**: {{nextDigestTime}}에 또 만나요!
        
        📱 **더 많은 경제 정보**: [경제뉴스 다이제스트 홈](https://github.com/yourco/econdigest)
        
        🤗 **피드백 환영**: 더 쉽고 유용한 다이제스트를 만들기 위해 여러분의 의견을 기다려요!
        
        🤖 Made with 💕 by EconDigest AI
        
    # 간단한 다이게스트 템플릿
    simple:
      title: "📊 경제뉴스 요약"
      subtitle: "오늘의 주요 경제 동향"
      
      header: |
        **{{date}}** 경제뉴스 요약 ({{totalArticles}}개)
        
      articleItem: |
        **{{title}}** ({{source}})
        {{aiSummary}}
        [링크]({{url}})
        
      footer: |
        
        ---
        총 {{totalArticles}}개 뉴스 | 평균 중요도 {{avgImportance}}/10
        
    # 상세 분석 템플릿
    detailed:
      title: "📈 경제뉴스 상세 분석 리포트"
      subtitle: "AI 기반 심층 경제 분석"
      
      header: |
        # 📈 경제뉴스 상세 분석 리포트
        
        **분석 일시**: {{date}} {{time}}
        **분석 대상**: {{totalArticles}}개 뉴스
        **AI 신뢰도**: {{avgConfidence}}/10
        
        ## 📊 오늘의 경제 동향 개요
        
        {{#if hasHighImportanceNews}}
        🔴 **주요 이슈**: 중요도 8점 이상의 뉴스가 {{highImportanceCount}}건 발생했습니다.
        {{/if}}
        
        {{#if hasCriticalNews}}
        🚨 **긴급**: 중요도 9점 이상의 긴급 뉴스가 있습니다.
        {{/if}}
        
        **시장 영향 분석**:
        - 📈 긍정적 영향: {{positiveNews}}건 ({{positivePercent}}%)
        - 📉 부정적 영향: {{negativeNews}}건 ({{negativePercent}}%)  
        - ⚖️ 중립적 영향: {{neutralNews}}건 ({{neutralPercent}}%)
        
        ---
        
      sectionHeaders:
        critical: "🚨 **긴급 뉴스** (중요도 9-10점)"
        veryHigh: "🔴 **매우 중요** (중요도 8점)"
        high: "🟡 **중요** (중요도 6-7점)"
        medium: "🟢 **보통** (중요도 4-5점)"
        low: "⚪ **참고** (중요도 1-3점)"
      
      articleItem: |
        ## {{importance}}⭐ {{title}}
        
        **📰 출처**: {{source}} | **🕐 발행**: {{publishedTime}}  
        **🎯 중요도**: {{importanceScore}}/10 | **🔍 신뢰도**: {{confidenceScore}}/10
        
        ### 📝 **요약 (한 눈에 파악)**
        {{#aiSummaryFormatted}}
        ✓ {{this}}
        {{/aiSummaryFormatted}}
        
        ### 🧠 **AI 심층 분석**
        {{#aiAnalysisFormatted}}
        🔸 **{{@index|increment}}.** {{this}}
        {{/aiAnalysisFormatted}}
        
        ### 📊 **시장 영향 분석**
        | 구분 | 평가 | 상세 |
        |------|------|------|
        | 시장 영향도 | {{marketImpact}} | 주가/환율/금리에 미치는 영향 |
        | 투자자 관심 | {{investorInterest}} | 투자 결정에 영향을 주는 정도 |
        | 관련 섹터 | {{economicSectors}} | 직접적 영향을 받는 산업 분야 |
        
        ### 🏷️ **핵심 키워드 & 태그**
        {{#keywords}}
        `#{{this}}` 
        {{/keywords}}
        
        {{#if context}}
        ### 💡 **추가 배경 정보**
        {{#contextFormatted}}
        💭 {{this}}
        {{/contextFormatted}}
        {{/if}}
        
        {{#if glossary}}
        ### 📖 **경제 용어 사전**
        {{#glossary}}
        **🔸 {{term}}**  
        {{definition}}
        
        {{/glossary}}
        {{/if}}
        
        📖 **[📄 원문 전체 보기]({{url}})** | 📊 **신뢰도** {{confidenceScore}}/10
        
        ---
        
      footer: |
        
        ---
        
        # 📊 상세 통계 및 분석
        
        ## 🔢 수집/분석 통계
        | 구분 | 수량 | 비율 |
        |------|------|------|
        | 총 수집 뉴스 | {{totalCollected}}개 | 100% |
        | 본문 추출 성공 | {{extractedNews}}개 | {{extractSuccessRate}}% |
        | AI 분석 완료 | {{totalAnalyzed}}개 | {{analysisSuccessRate}}% |
        | 최종 선정 뉴스 | {{totalArticles}}개 | {{selectionRate}}% |
        
        ## 📈 중요도 분포
        | 중요도 | 개수 | 비율 |
        |--------|------|------|
        | 9-10점 (긴급) | {{criticalCount}}개 | {{criticalPercent}}% |
        | 8점 (매우 중요) | {{veryHighCount}}개 | {{veryHighPercent}}% |
        | 6-7점 (중요) | {{highCount}}개 | {{highPercent}}% |
        | 4-5점 (보통) | {{mediumCount}}개 | {{mediumPercent}}% |
        | 1-3점 (참고) | {{lowCount}}개 | {{lowPercent}}% |
        
        ## 🏢 섹터별 분석
        {{#each sectorAnalysis}}
        - **{{sector}}**: {{count}}건 (평균 중요도: {{avgImportance}}/10)
        {{/each}}
        
        ## 📅 시간대별 분포  
        {{#each timeAnalysis}}
        - **{{timeRange}}**: {{count}}건
        {{/each}}
        
        ---
        
        💡 **종합 의견**: {{overallAssessment}}
        
        ⚠️ **주의사항**: 이 분석은 AI에 의해 자동 생성된 것으로, 투자 결정 시 추가적인 정보 수집과 전문가 상담을 권합니다.
        
        📧 문의사항이 있으시면 [이슈 등록](https://github.com/yourco/econdigest/issues)을 통해 알려주세요.
        
        🤖 **EconDigest AI** | 📅 {{currentDateTime}}

  # 형식별 설정
  formats:
    markdown:
      fileExtension: ".md"
      mimeType: "text/markdown; charset=utf-8"
      
    html:
      fileExtension: ".html"
      mimeType: "text/html; charset=utf-8"
      wrapperTemplate: |
        <!DOCTYPE html>
        <html lang="ko">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>{{title}}</title>
            <style>
                body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; margin: 40px; }
                h1, h2, h3 { color: #333; }
                .article { border-bottom: 1px solid #eee; margin-bottom: 30px; padding-bottom: 20px; }
                .meta { color: #666; font-size: 0.9em; }
                .summary { background: #f8f9fa; padding: 15px; border-radius: 5px; margin: 10px 0; }
                .analysis { background: #e8f4f8; padding: 15px; border-radius: 5px; margin: 10px 0; }
                .stats { background: #f0f8f0; padding: 20px; border-radius: 10px; margin: 20px 0; }
                .importance-high { border-left: 4px solid #ff4444; }
                .importance-medium { border-left: 4px solid #ffaa00; }
                .importance-low { border-left: 4px solid #44ff44; }
                a { color: #0066cc; text-decoration: none; }
                a:hover { text-decoration: underline; }
            </style>
        </head>
        <body>
            {{content}}
        </body>
        </html>
        
    json:
      fileExtension: ".json"
      mimeType: "application/json; charset=utf-8"

  # 발송 설정
  delivery:
    # 기본 발송 시간 (24시간 형식)
    defaultDeliveryTimes:
      - "07:00"  # 아침 7시
      - "12:00"  # 낮 12시  
      - "18:00"  # 저녁 6시
      
    # 주말 발송 여부
    enableWeekendDelivery: false
    
    # 공휴일 발송 여부  
    enableHolidayDelivery: false
    
    # 최소 기사 수 (이보다 적으면 발송 안함)
    minArticlesForDelivery: 3
    
    # 최대 기사 수 (이보다 많으면 중요도 순으로 필터링)
    maxArticlesPerDigest: 20

---
spring:
  profiles: test

# 테스트용 간단한 템플릿
digest:
  templates:
    default:
      title: "테스트 다이제스트"
      subtitle: "테스트용"
      
      header: |
        # 테스트 다이제스트 - {{date}}
        총 {{totalArticles}}개 기사
        
      articleItem: |
        ## {{title}} ({{source}})
        {{aiSummary}}
        중요도: {{importanceScore}}/10
        [링크]({{url}})
        
      footer: |
        ---
        테스트 완료
        
  formats:
    markdown:
      fileExtension: ".md"
      mimeType: "text/markdown; charset=utf-8"
      
  delivery:
    defaultDeliveryTimes:
      - "09:00"
    enableWeekendDelivery: true
    enableHolidayDelivery: true  
    minArticlesForDelivery: 1
    maxArticlesPerDigest: 5